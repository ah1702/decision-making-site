<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Sleep Pattern & Goal Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            text-align: center;
        }

        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            width: 80%;
            max-width: 800px;
            margin-top: 20px;
        }

        h1 {
            font-size: 2em;
            margin-bottom: 20px;
        }

        textarea {
            width: 100%;
            height: 150px;
            padding: 10px;
            margin-bottom: 20px;
            font-size: 1em;
            border-radius: 8px;
            border: 1px solid #ccc;
        }

        button {
            padding: 10px 20px;
            font-size: 1em;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        button:hover {
            background-color: #45a049;
        }

        canvas {
            margin-top: 30px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Sleep Pattern & Goal Tracker</h1>
        
        <!-- Phase 1: Current Sleep Pattern -->
        <h2>Phase 1: Current Sleep Pattern</h2>
        <form id="phase1">
            <label for="consistency">How consistent are your sleep times?</label><br>
            <select id="consistency">
                <option value="1">Very consistent</option>
                <option value="2">Sometimes consistent</option>
                <option value="3">Highly inconsistent</option>
            </select><br><br>

            <label for="irregularity">Do you have periods of irregular sleep?</label><br>
            <select id="irregularity">
                <option value="1">Yes</option>
                <option value="2">No</option>
            </select><br><br>

            <label for="energy">How would you describe your typical energy levels throughout the day?</label><br>
            <select id="energy">
                <option value="1">Peaks and valleys</option>
                <option value="2">Steady energy</option>
                <option value="3">Drastic changes</option>
            </select><br><br>

            <label for="currentHours">How many hours of sleep do you currently get each night?</label><br>
            <select id="currentHours">
                <option value="1">Less than 6 hours</option>
                <option value="2">Between 6-8 hours</option>
                <option value="3">More than 8 hours</option>
            </select><br><br>

            <button type="button" onclick="processPhase1()">Next</button>
        </form>

        <!-- Phase 2: Sleep Goals -->
        <h2>Phase 2: Sleep Goals</h2>
        <form id="phase2">
            <label for="goalDuration">What is your goal for your sleep duration over the next month?</label><br>
            <select id="goalDuration">
                <option value="1">Gradually increase sleep duration</option>
                <option value="2">Increase sleep duration rapidly</option>
                <option value="3">Stabilize and maintain sleep duration</option>
            </select><br><br>

            <label for="goalSpeed">How quickly do you hope to reach your desired sleep quality or time?</label><br>
            <select id="goalSpeed">
                <option value="1">Quickly (a few days to a week)</option>
                <option value="2">Steadily (a couple of weeks)</option>
                <option value="3">Gradually (over several months)</option>
            </select><br><br>

            <label for="maintainGoal">Would you like to maintain a specific sleep goal after reaching it?</label><br>
            <select id="maintainGoal">
                <option value="1">Yes, stabilize and maintain it</option>
                <option value="2">No, I want to adjust it</option>
            </select><br><br>

            <label for="goalHours">How many hours of sleep would you ideally like to get each night?</label><br>
            <select id="goalHours">
                <option value="1">Less than 6 hours</option>
                <option value="2">Between 6-8 hours</option>
                <option value="3">More than 8 hours</option>
            </select><br><br>

            <button type="button" onclick="processPhase2()">Generate Graph</button>
        </form>

        <canvas id="sleepChart"></canvas>
    </div>

    <script>
        let phase1Data = {
            consistency: null,
            irregularity: null,
            energy: null,
            currentHours: null
        };

        let phase2Data = {
            goalDuration: null,
            goalSpeed: null,
            maintainGoal: null,
            goalHours: null
        };

        function processPhase1() {
            phase1Data.consistency = document.getElementById('consistency').value;
            phase1Data.irregularity = document.getElementById('irregularity').value;
            phase1Data.energy = document.getElementById('energy').value;
            phase1Data.currentHours = document.getElementById('currentHours').value;

            // Based on this data, determine the graph type for Phase 1
            let phase1Graph = determineGraphType(phase1Data);
            generateGraph(phase1Graph, 'blue', 'Phase 1: Current Sleep Pattern');
        }

        function processPhase2() {
            phase2Data.goalDuration = document.getElementById('goalDuration').value;
            phase2Data.goalSpeed = document.getElementById('goalSpeed').value;
            phase2Data.maintainGoal = document.getElementById('maintainGoal').value;
            phase2Data.goalHours = document.getElementById('goalHours').value;

            // Based on this data, determine the graph type for Phase 2
            let phase2Graph = determineGraphType(phase2Data);
            generateGraph(phase2Graph, 'green', 'Phase 2: Sleep Goals');
        }

        function determineGraphType(data) {
            // Placeholder logic for determining graph type
            // More sophisticated logic based on answers can be added here
            if (data.currentHours === "1") {
                return 'exponential'; // Example logic based on hours
            } else if (data.goalDuration === "2") {
                return 'linear'; 
            } else {
                return 'polynomial'; 
            }
        }

        function generateGraph(graphType, color, phaseLabel) {
            const ctx = document.getElementById('sleepChart').getContext('2d');
            new Chart(ctx, {
                type: graphType, // 'line', 'bar', etc.
                data: {
                    labels: Array.from({ length: 30 }, (_, i) => i + 1),
                    datasets: [{
                        label: phaseLabel,
                        data: Array.from({ length: 30 }, (_, i) => i + 1),
                        borderColor: color,
                        fill: false,
                        tension: 0.4,
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: phaseLabel
                        }
                    }
                }
            });
        }
    </script>
</body>

</html>
